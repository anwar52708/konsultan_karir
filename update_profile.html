<!-- accounts/templates/accounts/update_profile.html -->
{% extends 'accounts/admin_base.html' %} {# Atau base.html jika ini untuk pengguna umum #}

{% block title %}Edit Profil - Konsultan Karir{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h4>Edit Profil Anda</h4>
        <p class="text-muted">Perbarui informasi pribadi Anda.</p>
    </div>
</div>

<div class="row">
    <div class="col-md-8 offset-md-2">
        <div class="card">
            <div class="card-header">
                <h5>Formulir Edit Profil</h5>
            </div>
            <div class="card-body">
                {% if messages %}
                    <div class="messages mb-3">
                        {% for message in messages %}
                        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}" role="alert">
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <form method="post" novalidate>
                    {% csrf_token %}

                    {# Form untuk User data #}
                    <fieldset class="mb-4 p-3 border rounded">
                        <legend class="h6">Informasi Akun</legend>
                        {% for field in user_form %}
                            <div class="mb-3 text-start">
                                {{ field.label_tag }}
                                {{ field }}
                                {% if field.help_text %}
                                    <div class="form-text">{{ field.help_text }}</div>
                                {% endif %}
                                {% for error in field.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                        {% if user_form.non_field_errors %}
                            <div class="alert alert-danger mt-3" role="alert">
                                {% for error in user_form.non_field_errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </fieldset>

                    {# Form untuk Profile data #}
                    <fieldset class="mb-4 p-3 border rounded">
                        <legend class="h6">Informasi Profil Tambahan</legend>
                        {% for field in profile_form %}
                            <div class="mb-3 text-start">
                                {{ field.label_tag }}
                                {{ field }}
                                {% if field.help_text %}
                                    <div class="form-text">{{ field.help_text }}</div>
                                {% endif %}
                                {% for error in field.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                        {% if profile_form.non_field_errors %}
                            <div class="alert alert-danger mt-3" role="alert">
                                {% for error in profile_form.non_field_errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </fieldset>

                    <button type="submit" class="btn btn-primary w-100">Simpan Perubahan</button>
                    <p class="text-muted mt-3 text-center"><a href="{% url 'profile' %}" class="text-decoration-none">Kembali ke Profil</a></p>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
